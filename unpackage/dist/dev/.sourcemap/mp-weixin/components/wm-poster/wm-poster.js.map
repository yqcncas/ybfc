{"version":3,"sources":["webpack:///E:/UNIAPP/yingbang_applet/components/wm-poster/wm-poster.vue?6395","webpack:///E:/UNIAPP/yingbang_applet/components/wm-poster/wm-poster.vue?9c17","webpack:///E:/UNIAPP/yingbang_applet/components/wm-poster/wm-poster.vue?2f91","webpack:///E:/UNIAPP/yingbang_applet/components/wm-poster/wm-poster.vue?b970","uni-app:///components/wm-poster/wm-poster.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8vB,CAAgB,mxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACOlxB,U;AACA;AACA,mBADA;AAEA;AACA;AACA,kBADA;AAEA,6BAFA,EADA;;AAKA;AACA,kBADA;AAEA,iBAFA,EALA;;AASA;AACA,kBADA;AAEA,iBAFA,EATA;;AAaA;AACA,kBADA;AAEA,iBAFA,EAbA;;AAiBA;AACA,kBADA;AAEA,iBAFA,EAjBA;;AAqBA;AACA,kBADA;AAEA,iBAFA,EArBA;;AAyBA;AACA,kBADA;AAEA,iBAFA,EAzBA;;AA6BA;AACA,kBADA;AAEA,iBAFA,EA7BA;;AAiCA;AACA,kBADA;AAEA,iBAFA,EAjCA;;AAqCA;AACA,kBADA;AAEA,wBAFA,EArCA;;AAyCA;AACA,6BADA;AAEA,oBAFA,EAzCA;;AA6CA;AACA,kBADA;AAEA,2BAFA,EA7CA;;AAiDA;AACA,kBADA;AAEA,wBAFA,EAjDA;;AAqDA;AACA,kBADA;AAEA,kBAFA,EArDA;;AAyDA;AACA,kBADA;AAEA,mBAFA,EAzDA;;AA6DA;AACA,kBADA;AAEA,wBAFA,EA7DA;;AAiEA;AACA,kBADA;AAEA,4BAFA,EAjEA;;AAqEA;AACA,kBADA;AAEA,2BAFA,EArEA;;AAyEA;AACA,kBADA;AAEA,qBAFA,EAzEA;;AA6EA;AACA,kBADA;AAEA,mBAFA,EA7EA;;AAiFA;AACA,kBADA;AAEA,mBAFA,EAjFA,EAFA;;;AAwFA,MAxFA,kBAwFA;AACA;AACA,gBADA;AAEA,gBAFA;AAGA,sBAHA;AAIA,eAJA;;AAMA,GA/FA;AAgGA;AACA,YADA,sBACA;AACA;AACA,mBAFA,GAEA,uBAFA;AAGA,mBAHA,GAGA,gBAHA;AAIA,mBAJA,GAIA,cAJA;AAKA,mBALA,GAKA,eALA;AAMA,mBANA,GAMA,eANA;AAOA,mBAPA,GAOA,cAPA;AAQA,mBARA,GAQA,wCARA;AASA,sBATA,GASA,gBATA;AAUA,mBAVA,GAUA,uBAVA;AAWA,yBAXA,GAWA,CAXA,EAWA;AAXA,yCAYA;AACA,uCADA,GAZA,QAYA,QAZA;;AAeA;AACA,yCADA,GAfA,SAeA,QAfA;;AAkBA;AACA,wCADA,GAlBA,UAkBA,QAlBA;;AAqBA;AACA,yCADA,GArBA,UAqBA,SArBA;;AAwBA;AACA,yCADA,GAxBA,UAwBA,SAxBA;;AA2BA;AACA,yCADA,GA3BA,UA2BA,SA3BA;;AA8BA;AACA,uCADA,GA9BA,UA8BA,OA9BA;AAgCA;AACA;AACA,iBAlCA,GAkCA,+BAlCA;AAmCA;AACA,yBApCA,GAoCA,aApCA;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAjDA,CAiDA;AACA,mDAlDA,CAkDA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAzDA,CAyDA;AACA,kDA1DA,CA0DA;AACA;AACA,sDA5DA,CA4DA;AACA,kDA7DA,CA6DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,sDAlFA,CAkFA;AACA,yDAnFA,CAmFA;AACA,6BApFA,GAoFA,CApFA,EAoFA;AACA,0BArFA,GAqFA,qBArFA,EAqFA;AACA,oBAtFA,GAsFA,CAtFA;AAuFA,iBAvFA,GAuFA,CAvFA,eAuFA,sBAvFA;AAwFA,yEAxFA;AAyFA,oDAzFA;AA0FA;AACA;AACA,uBA5FA;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA,iBApHA,QAuFA,GAvFA;;AAsHA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sDA3IA,CA2IA;AACA,kDA5IA,CA4IA;AACA;AACA;AACA;;AAEA;AACA,sDAlJA,CAkJA;AACA,kDAnJA,CAmJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDA1KA,CA0KA;AACA,kDA3KA,CA2KA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAFA;AAGA,iBAJA,EAIA,GAJA,EArLA;AA0LA,KA3LA;AA4LA,gBA5LA;;AA8LA,kOADA,MACA,QADA,MACA;AACA;AACA;AACA,+BADA;AAEA;AACA;AACA;AACA,qBALA;AAMA,wBANA,gBAMA,GANA,EAMA;AACA;AACA,qBARA;;AAUA,iBAXA,CADA;AAaA,KA3MA;AA4MA,eA5MA,yBA4MA;AACA;AACA,gCADA;AAEA,kBAFA;AAGA;AACA;AACA,SALA;AAMA,UANA;AAOA,KApNA,EAhGA;;;AAuTA,SAvTA,qBAuTA;AACA;AACA;AACA;AACA,KAFA,EAEA,IAFA;AAGA,GA5TA,E","file":"components/wm-poster/wm-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wm-poster.vue?vue&type=template&id=0900cee4&\"\nvar renderjs\nimport script from \"./wm-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wm-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/wm-poster/wm-poster.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=template&id=0900cee4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<canvas :canvas-id=\"CanvasID\" :style=\"{ width: canvasW + 'px', height: canvasH + 'px'}\" style=\"border-radius: 10px;\"></canvas>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar _this;\r\n\texport default {\r\n\t\tname: 'wm-poster',\r\n\t\tprops: {\r\n\t\t\tCanvasID: { //CanvasID 等同于 canvas-id\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: 'PosterCanvas'\r\n\t\t\t},\r\n\t\t\tbackImg:{//背景图\r\n\t\t\t\tType:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\timgSrc: { //展示图-1\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\timgSrc2: { //展示图-2\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\timgSrc3: { //展示图-3\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\timgSrc4: { //展示图-4\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tQrSrc: { //二维码\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tLogoSrc: {\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tTitle: { //文本内容\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tTitleColor: { //标题颜色\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '#333333'\r\n\t\t\t},\r\n\t\t\tLineType: { //标题显示行数\t\t\r\n\t\t\t\tType: [String, Boolean],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tTime: { //时间\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '2018/08/31'\r\n\t\t\t},\r\n\t\t\tOriginalColor: { //默认颜色\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '#b8b8b8'\r\n\t\t\t},\r\n\t\t\tWidth: { //画布宽度  (高度根据图片比例计算 单位upx)\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: 750\r\n\t\t\t},\r\n\t\t\tHeight:{\r\n\t\t\t\tType:String,\r\n\t\t\t\tdefault:1684\r\n\t\t\t},\r\n\t\t\tCanvasBg: { //canvas画布背景色\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '#ffffff'\r\n\t\t\t},\r\n\t\t\tReferrer: { //推荐人信息\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: 'quitter推荐给你'\r\n\t\t\t},\r\n\t\t\tViewDetails: { //描述提示文字\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '长按或扫描识别二维码'\r\n\t\t\t},\r\n\t\t\tprice:{\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '暂无售价'\r\n\t\t\t},\r\n\t\t\thomeType:{\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '未知'\r\n\t\t\t},\r\n\t\t\tacreage:{\r\n\t\t\t\tType: String,\r\n\t\t\t\tdefault: '未知'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanvasW: 0,\r\n\t\t\t\tcanvasH: 0,\r\n\t\t\t\tcanvasImgSrc: '',\r\n\t\t\t\tctx: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync OnCanvas() {\r\n\t\t\t\t_this.ctx = uni.createCanvasContext(_this.CanvasID, this);\r\n\t\t\t\tconst C_W = uni.upx2px(_this.Width), //canvas宽度\r\n\t\t\t\t\t C_H = uni.upx2px(1684),//canvas高度\r\n\t\t\t\t\tC_P = uni.upx2px(30), //canvas Paddng 间距\r\n\t\t\t\t\tC_Q = uni.upx2px(180), //二维码或太阳码宽高\r\n\t\t\t\t\tL_W = uni.upx2px(198),\r\n\t\t\t\t\tL_H = uni.upx2px(56),\r\n\t\t\t\t\tI_W = uni.upx2px(_this.Width) - uni.upx2px(60),//第一张图片宽度\r\n\t\t\t\t\tCard_H = uni.upx2px(1046),//卡片高度\r\n\t\t\t\t\tM_W = I_W/3 - uni.upx2px(8);\r\n\t\t\t\t    let _strlineW = 0; //文本宽度\r\n\t\t\t\t\tlet _backImg = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.backImg\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet _logoSrc = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.LogoSrc\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet _imgInfo = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.imgSrc\r\n\t\t\t\t\t}); //广告图\r\n\t\t\t\t\tlet _imgInfo2 = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.imgSrc2\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet _imgInfo3 = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.imgSrc3\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet _imgInfo4 = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.imgSrc4\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet _QrCode = await _this.getImageInfo({\r\n\t\t\t\t\t\timgSrc: _this.QrSrc\r\n\t\t\t\t\t}); //二维码或太阳码\r\n\t\t\t\t\t// let r = [_imgInfo.width, _imgInfo.height];\r\n\t\t\t\t\tlet q = [_QrCode.width, _QrCode.height];\r\n\t\t\t\t\t// let l = [L_W, L_H];\r\n\t\t\t\t\tlet showWidth = C_W - C_P * 2\r\n\t\t\t\t\t// let imgW = (C_W - C_P * 3)/2;\r\n\t\t\t\t\t// if (r[0] != imgW) {\r\n\t\t\t\t\t//     r[1] = Math.floor((imgW / r[0]) * r[1]);\r\n\t\t\t\t\t// \tr[0] = imgW;\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tif (q[0] != C_Q) {\r\n\t\t\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\r\n\t\t\t\t\t\tq[0] = C_Q;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.canvasW = C_W;\r\n\t\t\t\t\t_this.canvasH = C_H;\r\n\t\t\t\t\t_this.cardHeigth = Card_H\r\n\t\t\t\t\t_this.ctx.setFillStyle(_this.CanvasBg); //canvas背景颜色\r\n\t\t\t\t\t_this.ctx.fillRect(0, 0, C_W, C_H); //canvas画布大小\r\n\t\t\t\t\t\r\n\t\t\t\t\t//背景图\r\n\t\t\t\t\t_this.ctx.drawImage(_backImg.path, 0, 0, C_W, C_H);\r\n\t\t\t\t\t//英棒房产logo\r\n\t\t\t\t\t_this.ctx.drawImage(_logoSrc.path,C_P,uni.upx2px(44),uni.upx2px(258),uni.upx2px(84))\r\n\t\t\t\t\t//标题\r\n\t\t\t\t\t_this.ctx.setFontSize(uni.upx2px(48));//字体大小\r\n\t\t\t\t\t_this.ctx.setFillStyle('#FFFFFF');//字体颜色\r\n\t\t\t\t\t_this.ctx.fillText('海 量 信 息  在 线 看 房',C_P,uni.upx2px(188),uni.upx2px(466))\r\n\t\t\t\t\t_this.ctx.setFontSize(uni.upx2px(28));//字体大小\r\n\t\t\t\t\t_this.ctx.setFillStyle('#FFFFFF');//字体颜色\r\n\t\t\t\t\t_this.ctx.fillText('最新 最快 最真实',C_P,uni.upx2px(236),uni.upx2px(466))\r\n\t\t\t\t\t\r\n\t\t\t\t\t//设置卡片\r\n\t\t\t\t\t_this.ctx.setFillStyle('#FFFFFF')\r\n\t\t\t\t\t_this.ctx.setStrokeStyle('#FFFFFF')\r\n\t\t\t\t\t_this.ctx.lineJoin = 'round'\r\n\t\t\t\t\t_this.ctx.lineWidth = 7\r\n\t\t\t\t\t_this.ctx.setShadow(0,0,20,'rgba(0,0,0,0.05)')\r\n\t\t\t\t\t_this.ctx.strokeRect(C_P,uni.upx2px(276),C_W-C_P*2,_this.cardHeigth)\r\n\t\t\t\t\t_this.ctx.fillRect(C_P,uni.upx2px(276),C_W-C_P*2,_this.cardHeigth)\r\n\t\t\t\t\t\r\n\t\t\t\t\t//添加图片展示\r\n\t\t\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, uni.upx2px(276),I_W,uni.upx2px(560));\r\n\t\t\t\t\t_this.ctx.drawImage(_imgInfo2.path,C_P,uni.upx2px(846), M_W, M_W)\r\n\t\t\t\t\t_this.ctx.drawImage(_imgInfo3.path,C_P+M_W+uni.upx2px(12),uni.upx2px(846),M_W, M_W)\r\n\t\t\t\t\t_this.ctx.drawImage(_imgInfo4.path,C_P+M_W*2+uni.upx2px(22),uni.upx2px(846),M_W, M_W)\r\n\t\t\t\t\t//添加图片展示 end\r\n\r\n\r\n\t\t\t\t\t//设置文本\r\n\t\t\t\t\t_this.ctx.setFontSize(uni.upx2px(44)); //设置标题字体大小\r\n\t\t\t\t\t_this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\r\n\t\t\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\r\n\t\t\t\t\tlet _strHeight = uni.upx2px(934)+M_W; //绘制字体距离canvas顶部的初始高度\r\n\t\t\t\t\tlet _num = 1;\r\n\t\t\t\t\tfor (let i = 0; i < _this.Title.length; i++) {\r\n\t\t\t\t\t\t_strlineW += _this.ctx.measureText(_this.Title[i]).width;\r\n\t\t\t\t\t\tif (_strlineW +C_P*4 + 22 > showWidth) {\r\n\t\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1) + '...', C_P*2, _strHeight);\r\n\t\t\t\t\t\t\t_strLastIndex = i;\r\n\t\t\t\t\t\t\t_num++;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t// if (_num == 2 && _this.LineType) {\r\n\t\t\t\t\t\t\t// \t//文字换行数量大于二进行省略号处理\r\n\t\t\t\t\t\t\t// \t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i - 8) + '...', C_P, _strHeight);\r\n\t\t\t\t\t\t\t// \t_strlineW = 0;\r\n\t\t\t\t\t\t\t// \t_strLastIndex = i;\r\n\t\t\t\t\t\t\t// \t_num++;\r\n\t\t\t\t\t\t\t// \tbreak;\r\n\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t// \tif (_num == 1) {\r\n\t\t\t\t\t\t\t// \t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1) + '...', C_P, _strHeight);\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_P, _strHeight);\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// \t_strlineW = 0;\r\n\t\t\t\t\t\t\t// \t_strHeight += 40;\r\n\t\t\t\t\t\t\t// \t_this.cardHeigth += 40;\r\n\t\t\t\t\t\t\t// \t_strLastIndex = i;\r\n\t\t\t\t\t\t\t// \t_num++;\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t} else if (i == _this.Title.length - 1) {\r\n\t\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_P*2, _strHeight);\r\n\t\t\t\t\t\t\t_strlineW = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t// \t//设置文本 end\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t// \t//设置时间\r\n\t\t\t\t// \t_strlineW = C_P;\r\n\t\t\t\t// \tif (_num == 1) {\r\n\t\t\t\t// \t\t_strHeight += 20; //单行标题时占位符\r\n\t\t\t\t// \t}else{\r\n\t\t\t\t// \t\t_strHeight += uni.upx2px(30);\t\t\t\t\t\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t//设置时间 end\r\n\t\t\t\t\t\r\n\t\t\t\t// \t// 添加分割线\r\n\t\t\t\t// \t_this.ctx.setFontSize(uni.upx2px(24));\r\n\t\t\t\t// \t_this.ctx.moveTo(C_P,_strHeight)\r\n\t\t\t\t// \t_this.ctx.lineTo(showWidth+C_P,_strHeight)\r\n\t\t\t\t// \t_this.ctx.strokeStyle = '#F0F0F0'\r\n\t\t\t\t// \t_this.ctx.stroke()\r\n\t\t\t\t\t\r\n\t\t\t\t// \t// 添加房源信息\r\n\t\t\t\t_strHeight += uni.upx2px(75);\r\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(24)); //设置标题字体大小\r\n\t\t\t\t_this.ctx.setFillStyle('#A2A2A2'); //设置标题文本颜色\r\n\t\t\t\t_this.ctx.fillText('售价',C_P*2,_strHeight)\r\n\t\t\t\t_this.ctx.fillText('房型',C_P*9,_strHeight)\r\n\t\t\t\t_this.ctx.fillText('面积',C_P*16,_strHeight)\r\n\t\t\t\t\r\n\t\t\t\t_strHeight += uni.upx2px(60);\r\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(32)); //设置标题字体大小\r\n\t\t\t\t_this.ctx.setFillStyle('#FE9E2E'); //设置标题文本颜色\r\n\t\t\t\t_this.ctx.fillText(_this.price,C_P*2,_strHeight)\r\n\t\t\t\t_this.ctx.fillText(_this.homeType,C_P*9,_strHeight)\r\n\t\t\t\t_this.ctx.fillText(_this.acreage,C_P*16,_strHeight)\r\n\t\t\t\t\t\r\n\t\t\t\t// \t_strHeight += uni.upx2px(45);\r\n\t\t\t\t// \t_this.ctx.moveTo(C_P,_strHeight)\r\n\t\t\t\t// \t_this.ctx.lineTo(showWidth+C_P,_strHeight)\r\n\t\t\t\t// \t_this.ctx.strokeStyle = '#F0F0F0'\r\n\t\t\t\t// \t_this.ctx.stroke()\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//添加二维码\r\n\t\t\t\t\t_strHeight += uni.upx2px(110);\r\n\t\t\t\t\t_this.ctx.save()\r\n\t\t\t\t\t_this.ctx.beginPath()\r\n\t\t\t\t\t_this.ctx.arc(C_W/2,_strHeight+C_Q/2,C_Q/2,0,2*Math.PI)\r\n\t\t\t\t\t_this.ctx.clip();\r\n\t\t\t\t\t_this.ctx.drawImage(_QrCode.path, C_W/2-C_Q/2, _strHeight, C_Q, C_Q);\t\t\t\t\r\n\t\t\t\t\t_this.ctx.restore()\r\n\t\t\t\t\t//添加二维码 end\r\n\t\t\t\t\t\r\n\t\t\t\t\t_strHeight += uni.upx2px(240);\r\n\t\t\t\t\t_this.ctx.setFontSize(uni.upx2px(24)); //设置标题字体大小\r\n\t\t\t\t\t_this.ctx.setFillStyle('#FFFFFF'); //设置标题文本颜色\r\n\t\t\t\t\t_this.ctx.fillText('长按识别二维码', C_W/2-C_P*3, _strHeight)\r\n\t\t\t\t\t\r\n\t\t\t\t// \t_strHeight += q[1]+uni.upx2px(30);\r\n\t\t\t\t// \t_this.ctx.setFontSize(uni.upx2px(28)); //设置标题字体大小\r\n\t\t\t\t// \t_this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\r\n\t\t\t\t// \t_this.ctx.fillText('英棒房产 海量房源', showWidth/2-C_P*3, _strHeight)\r\n\r\n\t\t\t\t// \t_this.canvasH = _strHeight+30;\r\n\t\t\t\t\t//延迟后渲染至canvas上\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.ctx.draw(true, (ret) => {\r\n\t\t\t\t\t\t\t_this.getNewImage();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 600);\r\n\t\t\t},\r\n\t\t\tasync getImageInfo({\r\n\t\t\t\timgSrc\r\n\t\t\t}) {\r\n\t\t\t\treturn new Promise((resolve, errs) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: imgSrc,\r\n\t\t\t\t\t\tsuccess: function(image) {\r\n\t\t\t\t\t\t\tconsole.log(image);\r\n\t\t\t\t\t\t\tresolve(image);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\terrs(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetNewImage() {\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: _this.CanvasID,\r\n\t\t\t\t\tquality: 1,\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t_this.$emit('success', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t_this = this;\r\n\t\t\tsetTimeout(() =>{\r\n\t\t\t\t_this.OnCanvas();\r\n\t\t\t},1000)\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":""}