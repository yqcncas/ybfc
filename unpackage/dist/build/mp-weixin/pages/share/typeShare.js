(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/share/typeShare"],{"03f5":function(e,t,n){"use strict";n.r(t);var a=n("912e"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"65a3":function(e,t,n){},"7dd8":function(e,t,n){"use strict";(function(e){n("ceaf");a(n("66fd"));var t=a(n("8e09"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"8e09":function(e,t,n){"use strict";n.r(t);var a=n("ac51"),o=n("03f5");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("a38d");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);t["default"]=c.exports},"912e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("4795"));o(n("d66d"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(a,o)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)}))}}var s=function(){n.e("components/wm-poster/wm-poster").then(function(){return resolve(n("85bb"))}.bind(null,n)).catch(n.oe)},c={name:"share",components:{wmPoster:s},data:function(){return{img:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img2:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img3:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img4:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",qrCode:"",title:"资讯标题，后台上传的信息，包含标题、图片、资讯正文内容等信息。信息展示全部，不省略，海报高度自适应。",width:"676",Logo:"https://img.bajiaostar.com/FoBApRntoR0fmZrzsl-nDlNQIDbr",show:!1,poster:"",id:"",type:"",time:"",code:"",path:"",page:"",scene:"",price:"",homeType:"",acreage:"",isAdmin:!1,userId:"",backImg:"https://img.bajiaostar.com/FpBP1-bGltO26j4TN20uOxzpmQaM"}},methods:{getQrCode:function(){var e=this;return r(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.getQrcodePic,{data:e.scene,page:e.page},"GET");case 2:n=t.sent,console.log(n),e.qrCode="https://admin.homeyb.cn"+n.data;case 5:case"end":return t.stop()}}),t)})))()},getPosterInfo:function(){var e=this;return r(a.default.mark((function t(){var n,o;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.apartment,{houseId:e.id},"GET");case 2:n=t.sent,e.title=n.data.newHouse.houseName,n.data.newHouse.picUrl&&(o=n.data.newHouse.picUrl.split(","),o[0]&&(e.img=o[0],e.img=e.img.replace("http","https")),o[1]&&(e.img2=o[1].replace("http","https"),console.log(e.img2)),o[2]&&(e.img3=o[2],e.img3=e.img4.replace("http","https")),o[3]&&(e.img4=o[3],e.img4=e.img4.replace("http","https"))),n.data.newHouse.price?e.price=n.data.newHouse.price+"万":e.price="暂无售价",n.data.newHouse.room1&&(e.homeType=n.data.newHouse.room1+"室"+n.data.newHouse.room2+"厅"+n.data.newHouse.room3+"卫"),n.data.newHouse.acreage&&(e.acreage=n.data.newHouse.acreage+"m²"),1==e.isAdmin?(e.path="pages/newHouse/apartment?id="+e.id+"&userId="+e.userId+"&share=1",e.page="pages/newHouse/apartment",e.scene=e.id+"&"+e.userId):(e.path="pages/newHouse/apartment?id="+e.id+"&share=1",e.page="pages/newHouse/apartment",e.scene=e.id),e.getQrCode();case 10:case"end":return t.stop()}}),t)})))()},getImage:function(t){e.hideLoading(),this.poster=t.tempFilePath,this.show=!0},download:function(){var t=this.poster;e.authorize({scope:"scope.writePhotosAlbum",success:function(){e.saveImageToPhotosAlbum({filePath:t,success:function(){e.showToast({icon:"none",title:"图片已经保存到您的手机相册"})},fail:function(){e.showToast({icon:"none",title:"保存失败"})}})},fail:function(){e.showModal({title:"授权提醒",content:"请您先开启您的相册权限",success:function(t){t.confirm&&e.openSetting({})}})}})}},onLoad:function(t){e.showLoading({title:"生成海报中"}),this.id=t.id},onShow:function(){e.getStorageSync("isAdmin")&&(this.isAdmin=e.getStorageSync("isAdmin"),1==this.isAdmin&&(this.userId=e.getStorageSync("userId"))),this.getPosterInfo()},onShareAppMessage:function(e){return e.from,{title:this.title,path:this.path,imageUrl:this.img}}};t.default=c}).call(this,n("543d")["default"])},a38d:function(e,t,n){"use strict";var a=n("65a3"),o=n.n(a);o.a},ac51:function(e,t,n){"use strict";var a={wmPoster:function(){return n.e("components/wm-poster/wm-poster").then(n.bind(null,"85bb"))}},o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}))}},[["7dd8","common/runtime","common/vendor"]]]);