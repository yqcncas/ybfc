(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/share/newShare"],{"0605":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("4795"));i(n("d66d"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(a,i)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)}))}}var s=function(){n.e("components/wm-poster/nw-poster").then(function(){return resolve(n("8131"))}.bind(null,n)).catch(n.oe)},c={name:"share",components:{nwPoster:s},data:function(){return{img:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img2:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img3:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",img4:"https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",qrCode:"",title:"资讯标题，后台上传的信息，包含标题、图片、资讯正文内容等信息。信息展示全部，不省略，海报高度自适应。",width:"676",Logo:"https://img.bajiaostar.com/FoBApRntoR0fmZrzsl-nDlNQIDbr",show:!1,poster:"",id:"",type:"",time:"",code:"",path:"",page:"",scene:"",price:"",publish:"",address:"",isAdmin:!1,userId:"",backImg:"https://img.bajiaostar.com/FpBP1-bGltO26j4TN20uOxzpmQaM"}},methods:{getQrCode:function(){var e=this;return r(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.getQrcodePic,{data:e.scene,page:e.page},"GET");case 2:n=t.sent,e.qrCode="https://admin.homeyb.cn"+n.data;case 4:case"end":return t.stop()}}),t)})))()},getPosterInfo:function(){var e=this;return r(a.default.mark((function t(){var n,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.areaInfo,{areaId:e.id},"GET");case 2:n=t.sent,e.title=n.data.newArea.areaName,n.data.newArea.picUrl&&(i=n.data.newArea.picUrl.split(","),i[0]&&(e.img=i[0].replace("http","https")),i[1]&&(e.img2=i[1].replace("http","https"),console.log(e.img2)),i[2]&&(e.img3=i[2].replace("http","https")),i[3]&&(e.img4=i[3].replace("http","https"))),n.data.newArea.price&&(e.price=n.data.newArea.price+"元/m²"),n.data.newArea.publish&&(e.publish=e.$dayjs(n.data.newArea.publish).format("YYYY-MM")),n.data.newArea.provinceString&&(e.address=n.data.newArea.provinceString),1==e.isAdmin?(e.path="pages/newHouse/newHouse?houseId="+e.id+"&houseType="+e.type+"&userId="+e.userId+"&share=1",e.page="pages/newHouse/newHouse",e.scene=e.id+"&"+e.type+"&"+e.userId):(e.path="pages/newHouse/newHouse?houseId="+e.id+"&houseType="+e.type+"&share=1",e.page="pages/newHouse/newHouse",e.scene=e.id+"&"+e.type),e.getQrCode();case 10:case"end":return t.stop()}}),t)})))()},getImage:function(t){e.hideLoading(),this.poster=t.tempFilePath,this.show=!0},download:function(){var t=this.poster;e.authorize({scope:"scope.writePhotosAlbum",success:function(){e.saveImageToPhotosAlbum({filePath:t,success:function(){e.showToast({icon:"none",title:"图片已经保存到您的手机相册"})},fail:function(){e.showToast({icon:"none",title:"保存失败"})}})},fail:function(){e.showModal({title:"授权提醒",content:"请您先开启您的相册权限",success:function(t){t.confirm&&e.openSetting({})}})}})}},onLoad:function(t){e.showLoading({title:"生成海报中"}),this.id=t.id,this.type=t.houseType},onShow:function(){e.getStorageSync("isAdmin")&&(this.isAdmin=e.getStorageSync("isAdmin"),1==this.isAdmin&&(this.userId=e.getStorageSync("userId"))),this.getPosterInfo()},onShareAppMessage:function(e){return console.log(this.path),e.from,{title:this.title,path:this.path,imageUrl:this.img}}};t.default=c}).call(this,n("543d")["default"])},1223:function(e,t,n){"use strict";var a,i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},"3e60":function(e,t,n){},"56ca":function(e,t,n){"use strict";var a=n("3e60"),i=n.n(a);i.a},"5ed3":function(e,t,n){"use strict";n.r(t);var a=n("1223"),i=n("9db7");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("56ca");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);t["default"]=c.exports},"82d7":function(e,t,n){"use strict";(function(e){n("ceaf");a(n("66fd"));var t=a(n("5ed3"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"9db7":function(e,t,n){"use strict";n.r(t);var a=n("0605"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a}},[["82d7","common/runtime","common/vendor"]]]);