(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/agent/agentDetail"],{"0b2f":function(e,t,o){"use strict";o.r(t);var n=o("ddb9"),a=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"3f54":function(e,t,o){},6324:function(e,t,o){"use strict";var n={uniLoadMore:function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"0be9"))}},a=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return n}))},"6e15":function(e,t,o){"use strict";var n=o("3f54"),a=o.n(n);a.a},ad6d:function(e,t,o){"use strict";(function(e){o("ceaf");n(o("66fd"));var t=n(o("f952"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},ddb9:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("4795")),a=s(o("d66d"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,o,n,a,s,i){try{var r=e[s](i),u=r.value}catch(l){return void o(l)}r.done?t(u):Promise.resolve(u).then(n,a)}function r(e){return function(){var t=this,o=arguments;return new Promise((function(n,a){var s=e.apply(t,o);function r(e){i(s,n,a,r,u,"next",e)}function u(e){i(s,n,a,r,u,"throw",e)}r(void 0)}))}}var u=function(){o.e("components/uni-load-more/uni-load-more").then(function(){return resolve(o("0be9"))}.bind(null,o)).catch(o.oe)},l=function(){Promise.all([o.e("common/vendor"),o.e("components/Modal/loginModal")]).then(function(){return resolve(o("b83e"))}.bind(null,o)).catch(o.oe)},d={name:"agentDetail",components:{uniLoadMore:u,loginModal:l},data:function(){return{userId:"",userInfo:[],height:64,top:0,scrollH:0,opcity:0,iconOpcity:0,deptName:"",newHouseList:[],oldHouseList:[],oldPage:1,oldTotalPage:"",newPage:1,newTotalPage:"",old:[],new:[],status:"loading",contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isNewArea:"",path:"",managerId:"",backHome:!1,modalShow:!1,isAdmin:!1,flag:!1}},methods:{back:function(){this.backHome?e.switchTab({url:"../home/home"}):e.navigateBack({delta:1})},getAgentInfo:function(){var e=this;return r(n.default.mark((function t(){var o,s;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.getAgentInfo,{userId:e.userId},"GET");case 2:if(o=t.sent,e.userInfo=o.data.user,e.userInfo.avatar=a.default.pro+"profile/avatar/"+e.userInfo.avatar,null==e.userInfo.years&&(e.userInfo.years=""),null==e.userInfo.times&&(e.userInfo.times=""),null==e.userInfo.visitTimes&&(e.userInfo.visitTimes=""),null==e.userInfo.company&&(e.userInfo.company=""),null==e.userInfo.plate&&(e.userInfo.plate=""),null==e.userInfo.district&&(e.userInfo.district=""),e.deptName=o.data.user.dept.deptName,o.data.newArea.length){for(s in o.data.newArea.forEach((function(e){e.picUrl?e.houseImg=e.picUrl.split(",")[0]:e.houseImg="https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",e.label&&(e.label=e.label.split(","))})),o.data.newArea.length/10>parseInt(o.data.newArea.length/10)?e.newTotalPage=parseInt(o.data.newArea.length/10)+1:e.newTotalPage=parseInt(o.data.newArea.length/10),e.new=o.data.newArea,e.new)s>=0+10*(e.newPage-1)&&s<=9+10*(e.newPage-1)&&e.newHouseList.push(e.new[s]);e.isNewArea=!0}else e.isNewArea=!1;if(o.data.oldHouse.length){for(s in o.data.oldHouse.forEach((function(e){e.picUrl?e.houseImg=e.picUrl.split(",")[0]:e.houseImg="https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",e.label&&(e.label=e.label.split(","))})),o.data.oldHouse.length/10>parseInt(o.data.oldHouse.length/10)?e.oldTotalPage=parseInt(o.data.oldHouse.length/10)+1:e.oldTotalPage=parseInt(o.data.oldHouse.length/10),e.old=o.data.oldHouse,e.old)s>=0+10*(e.oldPage-1)&&s<=9+10*(e.oldPage-1)&&e.oldHouseList.push(e.old[s]);e.oldPage>=e.oldTotalPage&&(e.status="noMore")}case 14:case"end":return t.stop()}}),t)})))()},callTel:function(){e.makePhoneCall({phoneNumber:this.userInfo.phonenumber})},loadMoreOldHouse:function(){for(var e in this.status="loading",this.old)e>=0+10*(this.oldPage-1)&&e<=9+10*(this.oldPage-1)&&this.oldHouseList.push(this.old[e]);this.oldPage>=this.oldTotalPage&&(this.status="noMore")},loadMoreNewHouse:function(){for(var e in this.new)e>=0+10*(this.newPage-1)&&e<=9+10*(this.newPage-1)&&this.newHouseList.push(this.new[e]);this.newPage==this.newTotalPage&&(this.isNewArea=!1,this.status="noMore")},checkNewDetail:function(t){this.flag?e.navigateTo({url:"../newHouse/newHouse?houseId="+t+"&houseType=3&flag=1&userId="+this.userId}):e.navigateTo({url:"../newHouse/newHouse?houseId="+t+"&houseType=3"})},checOldkDetail:function(t,o){this.flag?e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType="+o+"&flag=1&userId="+this.userId}):e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType="+o})},chatModal:function(){e.showModal({title:"提醒",content:"请在APP端进行微聊"})},modalClose:function(e){this.modalShow=e},getToken:function(t){e.setStorageSync("token",t),e.setStorageSync("isAdmin",!1),e.setStorageSync("isToken",!0),this.isToken=!0}},onLoad:function(t){var o=this,n={};if(n=wx.getMenuButtonBoundingClientRect(),e.getSystemInfo({success:function(e){o.width=n.left||e.windowWidth,o.height=n.top?n.top+n.height+8:e.statusBarHeight+44,o.top=n.top?n.top+(n.height-32)/2:e.statusBarHeight+6,o.scrollH=e.windowWidth}}),e.getStorageSync("userId")&&(this.managerId=e.getStorageSync("userId")),t.scene){this.backHome=!0,this.flag=!0;var a=decodeURIComponent(t.scene);this.userId=a,console.log(a),e.setStorageSync("manager",this.userId),e.getStorageSync("isToken")||setTimeout((function(){o.modalShow=!0}),1e3)}else this.userId=t.id,t.userId&&(e.setStorageSync("manager",t.userId),this.flag=!0,e.getStorageSync("isToken")||setTimeout((function(){o.modalShow=!0}),1e3)),t.share?this.backHome=!0:this.backHome=!1;e.getStorageSync("isAdmin")&&(this.isAdmin=e.getStorageSync("isAdmin")),this.getAgentInfo()},onReachBottom:function(){this.isNewArea?(this.newPage++,this.newPage<=this.newTotalPage&&this.loadMoreNewHouse()):(this.oldPage++,this.oldPage<=this.oldTotalPage&&this.loadMoreOldHouse())},onPageScroll:function(e){var t=e.scrollTop<=0?0:e.scrollTop,o=t/this.scrollH;this.opcity>=1&&o>=1||(this.opcity=o)},onShareAppMessage:function(e){return this.path="pages/agent/agentDetail?id="+this.userId+"&userId="+this.managerId+"&share=1",console.log(this.path),e.from,{title:"经纪人"+this.userInfo.userName,path:this.path}}};t.default=d}).call(this,o("543d")["default"])},f952:function(e,t,o){"use strict";o.r(t);var n=o("6324"),a=o("0b2f");for(var s in a)"default"!==s&&function(e){o.d(t,e,(function(){return a[e]}))}(s);o("6e15");var i,r=o("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=u.exports}},[["ad6d","common/runtime","common/vendor"]]]);