(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{6776:function(e,t,n){"use strict";(function(e){n("ceaf");o(n("66fd"));var t=o(n("8ac3"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},6961:function(e,t,n){},"6e62":function(e,t,n){"use strict";var o={uniSwiperDot:function(){return n.e("components/uni-swiper-dot/uni-swiper-dot").then(n.bind(null,"8735"))},uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"0be9"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"e7e0"))}},a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"8ac3":function(e,t,n){"use strict";n.r(t);var o=n("6e62"),a=n("9f77");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("ec70");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=u.exports},"8d28":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("4795"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return c(e)||u(e)||s(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function u(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t,n,o,a,i,r){try{var s=e[i](r),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(o,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(e){d(i,o,a,r,s,"next",e)}function s(e){d(i,o,a,r,s,"throw",e)}r(void 0)}))}}var f=function(){n.e("components/uni-swiper-dot/uni-swiper-dot").then(function(){return resolve(n("8735"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/uni-grid/uni-grid").then(function(){return resolve(n("7954"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("0be9"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("components/Modal/loginModal")]).then(function(){return resolve(n("b83e"))}.bind(null,n)).catch(n.oe)},v={name:"home",components:{uniSwiperDot:f,uniGrid:m,uniLoadMore:g,loginModal:p},data:function(){return{autoplay:!0,interval:3e3,indicatorDots:!0,indicatorColor:"#FFFFFF",swiperList:[],current:0,manager:"",newsList:[],saleList:[],tabList:[{id:"1",name:"二手房"},{id:"2",name:"新房"},{id:"3",name:"租房"}],tabCurrentIndex:0,textFlex:!0,homeList:[],swiperHeight:"",searchTop:"",top:"",isSearchFixed:!1,isHomeFixed:!1,isHide:!1,page:0,houseType:2,type:"",hasFlag:!0,status:"loading",contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多了"},isEmpty:!1,isScroll:!1,isAdmin:!1,homeGrid:!0,path:"",userId:"",modalShow:!1,videoUrl:"",windowBottom:0}},methods:{change:function(e){this.current=e.detail.current},changeTab:function(e){console.log(e,this.tabCurrentIndex),this.tabCurrentIndex!==e&&(this.tabCurrentIndex=e)},swiperChange:function(e){console.log(e.target),this.tabCurrentIndex=e.target.current,0==this.tabCurrentIndex?this.houseType=2:1==this.tabCurrentIndex?this.houseType=3:this.houseType=1,this.page=0,this.hasFlag=!0,this.status="loading",this.homeList=[],this.getRecommend()},goSearch:function(){e.navigateTo({url:"../search/search"})},jump:function(t){0==t&&e.navigateTo({url:"../homeList/homeList?id=1"}),1==t&&e.navigateTo({url:"../homeList/homeList?id=2"}),2==t&&e.navigateTo({url:"../homeList/homeList?id=3"}),3==t&&e.navigateTo({url:"../Owner/Owner"}),8==t&&e.navigateTo({url:"../recommend/recommend"}),6==t&&e.navigateTo({url:"../calculator/calculator"}),7==t&&e.navigateTo({url:"../wiki/wiki"}),5==t&&e.navigateTo({url:"../mapSearch/mapSearch"}),4==t&&e.navigateTo({url:"../xiaoqu/xiaoqu"}),9==t&&e.navigateTo({url:"../homeList/homeList?id=4"})},checkHeadLines:function(){e.navigateTo({url:"../headlines/headlines"})},getIndexData:function(){var e=this;return h(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.indexData,{},"GET");case 2:n=t.sent,e.swiperList=n.data.picasaList,n.data.headlines.forEach((function(t){t.content=e.filterHTMLTag(t.content)})),e.newsList=n.data.headlines,e.saleList=n.data.soldHous,console.log(n);case 8:case"end":return t.stop()}}),t)})))()},filterHTMLTag:function(e){e=e.replace(/<\/?[^>]*>/g,"");return e=e.replace(/[|]*\n/,""),e=e.replace(/&npsp;/gi,""),e},checkHeadDetail:function(t){e.navigateTo({url:"../headlines/headDetail?id="+t})},checkSale:function(){this.isAdmin&&e.navigateTo({url:"../salelist/salelist"})},checkSole:function(){e.navigateTo({url:"../video/video"})},getRecommend:function(){var e=this;return h(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasFlag){t.next=2;break}return t.abrupt("return");case 2:return e.page=++e.page,console.log(e.houseType),t.next=6,e.$fetch(e.$api.recommend,{pageNum:e.page,pageSize:10,type:e.houseType},"GET");case 6:n=t.sent,console.log(n),n.rows.forEach((function(e){e.picUrl?e.houseImg=e.picUrl.split(",")[0]:e.houseImg="https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",e.label&&(e.label=e.label.split(","))})),e.homeList=[].concat(i(e.homeList),i(n.rows)),n.total?e.isEmpty=!1:e.isEmpty=!0,e.hasFlag=10*e.page<n.total,e.hasFlag||(e.status="noMore"),console.log(e.homeList);case 14:case"end":return t.stop()}}),t)})))()},loadMore:function(){this.getRecommend()},checkSwiper:function(t){e.navigateTo({url:"../headlines/headDetail?id="+t})},checkDetail:function(t){2==this.houseType?this.manager?e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=2&flag=1&userId="+this.manager}):e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=2"}):1==this.houseType?this.manager?e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=1&flag=1&userId="+this.manager}):e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=1"}):3==this.houseType&&(this.manager?e.navigateTo({url:"../newHouse/newHouse?houseId="+t+"&houseType=3&flag=1&userId="+this.manager}):e.navigateTo({url:"../newHouse/newHouse?houseId="+t+"&houseType=3"}))},ifToken:function(){var t=this;return h(o.default.mark((function n(){var a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$fetch(t.$api.checkToken,{},"GET");case 2:a=n.sent,401==a.code?e.setStorageSync("isToken",!1):0==a.code&&e.setStorageSync("isToken",!0);case 4:case"end":return n.stop()}}),n)})))()},modalClose:function(e){this.modalShow=e},getToken:function(t){e.setStorageSync("token",t),e.setStorageSync("isAdmin",!1),e.setStorageSync("isToken",!0),this.isToken=!0},getVideo:function(){var e=this;return h(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.getVideoList,{pageNum:e.page,pageSize:10},"GET","form");case 2:n=t.sent,n.total>0&&(e.videoUrl=n.rows[0].url);case 4:case"end":return t.stop()}}),t)})))()},getSDKSign:function(){var t=this;return h(o.default.mark((function n(){var a,i,r,s,u,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=location.href,n.next=3,t.$fetch(t.$api.getSDKSign,{url:a},"POST","form");case 3:i=n.sent,r=i.data.noncestr,s=i.data.timestamp,u=i.data.sign,e.getStorageSync("isAdmin")?(c=location.href+"?id="+t.manager,jwx.config({appId:t.$api.appid,timestamp:s,nonceStr:r,signature:u,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),jwx.ready((function(){jwx.updateAppMessageShareData({title:"英棒房产",desc:"温州英棒房产，为您提供真实，有效，准确真房源!",link:c,imgUrl:"https://img.bajiaostar.com/2e0268c4601672d79e140d888a1f9e40",success:function(){console.log("成功设置分享到微信")}}),jwx.updateTimelineShareData({title:"英棒房产",link:c,imgUrl:"https://img.bajiaostar.com/2e0268c4601672d79e140d888a1f9e40",success:function(){console.log("成功设置分享到朋友圈")}})}))):(jwx.config({appId:t.$api.appid,timestamp:s,nonceStr:r,signature:u,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),jwx.ready((function(){jwx.updateAppMessageShareData({title:"英棒房产",desc:"温州英棒房产，为您提供真实，有效，准确真房源!",link:a,imgUrl:"https://img.bajiaostar.com/2e0268c4601672d79e140d888a1f9e40",success:function(){console.log("成功设置分享到微信")}}),jwx.updateTimelineShareData({title:"英棒房产",link:a,imgUrl:"https://img.bajiaostar.com/2e0268c4601672d79e140d888a1f9e40",success:function(){console.log("成功设置分享到朋友圈")}})})));case 8:case"end":return n.stop()}}),n)})))()}},onShow:function(){var t=this;e.getSystemInfo({success:function(e){t.windowBottom=e.windowBottom}}),this.isAdmin=!1,e.getStorageSync("isAdmin")&&(this.isAdmin=e.getStorageSync("isAdmin")),e.getStorageSync("userId")&&(this.userId=e.getStorageSync("userId")),e.getStorageSync("manager")&&(this.manager=e.getStorageSync("manager")),this.getIndexData(),this.getRecommend(),this.ifToken(),this.getVideo()},onLoad:function(t){var n=this;if(t.scene){var o=decodeURIComponent(t.scene);this.userId=o,console.log(o),e.setStorageSync("manager",this.userId),e.getStorageSync("isToken")||setTimeout((function(){n.modalShow=!0}),1e3)}else t.id&&(this.manager=t.id,console.log(t.id),e.setStorageSync("manager",t.id),e.getStorageSync("isToken")||setTimeout((function(){n.modalShow=!0}),1e3))},onPageScroll:function(t){var n=this,o=t.scrollTop;this.top-64>o?(this.isHomeFixed=!1,this.isScroll=!1):(this.isHomeFixed=!0,this.isScroll=!0),e.getSystemInfo({success:function(e){n.windowBottom=e.windowBottom}})},onReady:function(){var t=this,n=e.createSelectorQuery().select(".search");n.boundingClientRect((function(e){t.searchTop=e.top})).exec();var o=e.createSelectorQuery().select(".sale");o.boundingClientRect((function(e){t.top=e.top+e.height})).exec()},onShareAppMessage:function(e){return this.path="pages/home/home?id="+this.userId,e.from,{title:"英棒房产",path:this.path}}};t.default=v}).call(this,n("543d")["default"])},"9f77":function(e,t,n){"use strict";n.r(t);var o=n("8d28"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ec70:function(e,t,n){"use strict";var o=n("6961"),a=n.n(o);a.a}},[["6776","common/runtime","common/vendor"]]]);