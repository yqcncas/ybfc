(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/myCard"],{"27ee":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("4795")),o=r(n("d66d"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,o,r,i){try{var s=t[r](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(a,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function s(t){i(r,a,o,s,c,"next",t)}function c(t){i(r,a,o,s,c,"throw",t)}s(void 0)}))}}var c=function(){n.e("components/wm-poster/card").then(function(){return resolve(n("3030"))}.bind(null,n)).catch(n.oe)},u={name:"myCard",components:{card:c},data:function(){return{avatar:"",userName:"",company:"",postName:"",years:"",visitTimes:"",qrCode:"",page:"pages/home/home",scene:"",width:"590",height:"1048",img:"https://img.bajiaostar.com/FjLlW0Jl5OuvhnYcNSR2hCuMecCL",show:!1,poster:"",path:""}},methods:{getQrCode:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$fetch(t.$api.getQrcodePic,{data:t.scene,page:t.page},"GET");case 2:n=e.sent,console.log(n),t.qrCode="https://admin.homeyb.cn"+n.data;case 5:case"end":return e.stop()}}),e)})))()},getUserInfo:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$fetch(t.$api.getInfo,{},"GET");case 2:n=e.sent,n.data.avatar?t.avatar=o.default.pro+"profile/avatar/"+n.data.avatar:t.avatar="https://img.bajiaostar.com/FgkVAFlA5etvApeTeLEt2P0s822H",console.log(t.avatar),t.userName=n.data.userName,t.company=n.data.company,t.postName=n.data.postName,n.data.years?t.years=n.data.years:t.years="0",n.data.visitTimes?t.visitTimes=n.data.visitTimes:t.visitTimes="0";case 10:case"end":return e.stop()}}),e)})))()},getImage:function(e){t.hideLoading(),this.poster=e.tempFilePath,this.show=!0},download:function(){var e=this.poster;t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:e,success:function(){t.showToast({icon:"none",title:"图片已经保存到您的手机相册"})},fail:function(){t.showToast({icon:"none",title:"保存失败"})}})},fail:function(){t.showModal({title:"授权提醒",content:"请您先开启您的相册权限",success:function(e){e.confirm&&t.openSetting({})}})}})}},onLoad:function(e){this.scene=e.id,t.showLoading({title:"生成名片中"}),this.getUserInfo(),this.getQrCode()},onShareAppMessage:function(t){return this.path="pages/home/home?id="+this.scene,t.from,{title:"我的名片",path:this.path,imageUrl:this.poster}}};e.default=u}).call(this,n("543d")["default"])},5390:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"53cf":function(t,e,n){"use strict";n.r(e);var a=n("5390"),o=n("7a89");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("6916");var i,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=c.exports},6916:function(t,e,n){"use strict";var a=n("d953"),o=n.n(a);o.a},"7a89":function(t,e,n){"use strict";n.r(e);var a=n("27ee"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},a099:function(t,e,n){"use strict";(function(t){n("ceaf");a(n("66fd"));var e=a(n("53cf"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},d953:function(t,e,n){}},[["a099","common/runtime","common/vendor"]]]);