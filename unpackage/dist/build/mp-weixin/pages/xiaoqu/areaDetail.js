(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/xiaoqu/areaDetail"],{"084a":function(e,t,n){"use strict";var a={uniSwiperDot:function(){return n.e("components/uni-swiper-dot/uni-swiper-dot").then(n.bind(null,"8735"))},uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"0be9"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"e7e0"))}},o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}))},"0bf6":function(e,t,n){"use strict";n.r(t);var a=n("2f4b"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},"2f4b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("4795"));o(n("d66d"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return c(e)||u(e)||s(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function u(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t,n,a,o,r,i){try{var s=e[r](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(a,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){f(r,a,o,i,s,"next",e)}function s(e){f(r,a,o,i,s,"throw",e)}i(void 0)}))}}var d=function(){n.e("components/uni-swiper-dot/uni-swiper-dot").then(function(){return resolve(n("8735"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("0be9"))}.bind(null,n)).catch(n.oe)},m={name:"areaDetail",components:{uniSwiperDot:d,uniLoadMore:h},data:function(){return{areaId:"",height:64,top:0,scrollH:0,opcity:0,iconOpcity:.5,current:0,autoplay:!1,interval:3e3,circular:!0,swiperList:[],length:"",isPic1:"",isPic2:"",isPic3:"",pic1Num:"",pic2Num:"",pic3Num:"",areaInfo:[],houseType:2,page:0,hasFlag:!0,status:"loading",contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},homeList:[],isScroll:!1,fixedTop:611,isEmpty:"",typeList:[{id:1,name:"未知"},{id:2,name:"住宅"},{id:3,name:"商住"},{id:4,name:"商业"},{id:5,name:"公寓"},{id:6,name:"酒店"},{id:7,name:"店连屋"},{id:8,name:"车库"},{id:9,name:"别墅"}],manager:"",isAdmin:!1}},methods:{back:function(){e.navigateBack({delta:1})},change:function(e){this.current=e.detail.current,console.log(this.current)},getAreaDetail:function(){var e=this;return p(a.default.mark((function t(){var n,o,r,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.areaDetail,{areaId:e.areaId},"GET");case 2:n=t.sent,n.data.picUrl1?(o=n.data.picUrl1.split(","),e.pic1Num=o.length,o.forEach((function(t){e.swiperList.push(t)})),e.isPic1=!0):e.isPic1=!1,n.data.picUrl2?(r=n.data.picUrl2.split(","),e.pic2Num=r.length,r.forEach((function(t){e.swiperList.push(t)})),e.isPic2=!0):e.isPic2=!1,n.data.picUrl3?(i=n.data.picUrl3.split(","),e.pic3Num=i.length,i.forEach((function(t){e.swiperList.push(t)})),e.isPic3=!0):e.isPic3=!1,n.data.type||(n.data.type=0),e.length=e.swiperList.length,e.areaInfo=n.data,e.areaInfo.price1||(e.areaInfo.price1="0.0"),e.areaInfo.price2||(e.areaInfo.price2="0.0"),e.areaInfo.price3||(e.areaInfo.price3="0.0"),e.areaInfo.price3||(e.areaInfo.price3="0.0"),e.areaInfo.allBuild||(e.areaInfo.allBuild="0"),e.areaInfo.volume||(e.areaInfo.volume="0.0"),e.areaInfo.allRoom||(e.areaInfo.allRoom="0"),e.areaInfo.greeningRate||(e.areaInfo.greeningRate="0.0"),e.areaInfo.buildType||(e.areaInfo.buildType=""),e.areaInfo.propertyFee||(e.areaInfo.propertyFee="0.0"),e.areaInfo.overTime?e.areaInfo.overTime=e.$dayjs(e.areaInfo.overTime).format("YYYY年MM月"):e.areaInfo.overTime="",e.areaInfo.study1||(e.areaInfo.study1=""),e.areaInfo.study2||(e.areaInfo.study2=""),e.areaInfo.study3||(e.areaInfo.study3=""),e.areaInfo.apartment||(e.areaInfo.apartment=""),e.areaInfo.propertyMobile||(e.areaInfo.propertyMobile=""),e.areaInfo.propertyAddress||(e.areaInfo.propertyAddress=""),e.getAreaHouseList(),e.length||(e.swiperList[0]="https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx");case 28:case"end":return t.stop()}}),t)})))()},changeHouseType:function(e){this.houseType!=e&&(this.houseType=e),this.page=0,this.homeList=[],this.hasFlag=!0,this.status="loading",this.getAreaHouseList()},getAreaHouseList:function(){var e=this;return p(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasFlag){t.next=2;break}return t.abrupt("return");case 2:return e.page=++e.page,t.next=5,e.$fetch(e.$api.areaHouseList,{areaId:e.areaInfo.areaId,hoseType:e.houseType,pageNum:e.page,pageSize:10},"GET");case 5:n=t.sent,n.rows.forEach((function(e){e.picUrl?e.houseImg=e.picUrl.split(",")[0]:e.houseImg="https://img.bajiaostar.com/FnwyfqiIK3_RD5UR1k66KQ_y0VFx",e.label&&(e.label=e.label.split(","))})),n.total?e.isEmpty=!1:e.isEmpty=!0,e.homeList=[].concat(r(e.homeList),r(n.rows)),e.hasFlag=10*e.page<n.total,e.hasFlag||(e.status="noMore");case 11:case"end":return t.stop()}}),t)})))()},loadMore:function(){this.hasFlag?this.getAreaHouseList():this.status="noMore"},checkDetail:function(t){2==this.houseType?this.manager?e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=2&flag=1&userId="+this.manager}):e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=2"}):1==this.houseType&&(this.manager?e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=1&flag=1&userId="+this.manager}):e.navigateTo({url:"../oldHouse/oldHouse?houseId="+t+"&houseType=1"}))},checkAlbum:function(t){e.navigateTo({url:"album?id="+t})},viewImage:function(t){e.previewImage({urls:this.swiperList,current:t,loop:!0})}},onLoad:function(t){var n=this,a={};a=wx.getMenuButtonBoundingClientRect(),e.getSystemInfo({success:function(e){n.width=a.left||e.windowWidth,n.height=a.top?a.top+a.height+8:e.statusBarHeight+44,n.top=a.top?a.top+(a.height-32)/2:e.statusBarHeight+6,n.scrollH=e.windowWidth}}),this.areaId=t.areaId,this.getAreaDetail()},onShow:function(){e.getStorageSync("isAdmin")&&(this.isAdmin=e.getStorageSync("isAdmin")),e.getStorageSync("manager")&&(this.manager=e.getStorageSync("manager"))},onPageScroll:function(e){e.scrollTop>=this.fixedTop?this.isScroll=!0:this.isScroll=!1;var t=e.scrollTop<=0?0:e.scrollTop,n=t/this.scrollH;this.opcity>=1&&n>=1||(this.opcity=n,this.iconOpcity=.5*(1-n<0?0:1-n))},onReady:function(){var t=this,n=e.createSelectorQuery().select(".oldHouse");n.boundingClientRect((function(e){console.log(JSON.stringify(e)),t.fixedTop=e.top+e.height-50,console.log(t.fixedTop)})).exec()}};t.default=m}).call(this,n("543d")["default"])},"2f5e":function(e,t,n){},"59c8":function(e,t,n){"use strict";(function(e){n("ceaf");a(n("66fd"));var t=a(n("94b5"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"7d05":function(e,t,n){"use strict";var a=n("2f5e"),o=n.n(a);o.a},"94b5":function(e,t,n){"use strict";n.r(t);var a=n("084a"),o=n("0bf6");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("7d05");var i,s=n("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);t["default"]=u.exports}},[["59c8","common/runtime","common/vendor"]]]);