(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/Modal/loginModal"],{"0dbf":function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement;e._self._c},r=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}))},"923e":function(e,n,t){},b83e:function(e,n,t){"use strict";t.r(n);var o=t("0dbf"),a=t("ca8e");for(var r in a)"default"!==r&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("c8c5");var i,c=t("f0c5"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);n["default"]=s.exports},c8c5:function(e,n,t){"use strict";var o=t("923e"),a=t.n(o);a.a},ca8e:function(e,n,t){"use strict";t.r(n);var o=t("f606"),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},f606:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("4795"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t,o,a,r,i){try{var c=e[r](i),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(o,a)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(o,a){var i=e.apply(n,t);function c(e){r(i,o,a,c,s,"next",e)}function s(e){r(i,o,a,c,s,"throw",e)}c(void 0)}))}}var c=t("e109"),s={name:"loginModal",props:["show"],data:function(){return{appId:"wx685226499ed8d55c",mobile:"",openId:"",code:"",openid:"",session_key:"",manager:""}},methods:{GetPhoneNumber:function(n){if(console.log(n),"getPhoneNumber:fail user deny"==n.detail.errMsg)e.showModal({title:"提示",showCancel:!0,content:"您取消了授权"});else{var t=new c(this.appId,this.session_key),o=t.decryptData(n.detail.encryptedData,n.detail.iv);this.wxLogin(o.phoneNumber)}},wxLogin:function(n){var t=this;return i(o.default.mark((function a(){var r,i;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.getStorageSync("manager")&&(t.manager=e.getStorageSync("manager")),console.log(t.manager),!t.manager){o.next=10;break}return o.next=5,t.$fetch(t.$api.wxLogin,{mobile:n,openId:t.openid,manager:t.manager},"GET");case 5:r=o.sent,e.showToast({icon:"none",title:r.msg}),0!=r.code&&1001!=r.code||(t.$emit("close",!1),t.$emit("token",r.data.token)),o.next=15;break;case 10:return o.next=12,t.$fetch(t.$api.wxLogin,{mobile:n,openId:t.openid},"GET");case 12:i=o.sent,e.showToast({icon:"none",title:i.msg}),0!=i.code&&1001!=i.code||(t.$emit("close",!1),t.$emit("token",i.data.token));case 15:case"end":return o.stop()}}),a)})))()},getCode:function(){var n=this;e.login({provider:"weixin",success:function(e){e.code&&(n.code=e.code,n.getOpenId())}})},getOpenId:function(){var n=this;return i(o.default.mark((function t(){var a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$fetch(n.$api.getOpenId,{js_code:n.code},"GET");case 2:a=t.sent,n.openid=a.data.openid,e.setStorageSync("openId",n.openid),n.session_key=a.data.session_key,e.setStorageSync("session_key",n.session_key);case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.getCode()}};n.default=s}).call(this,t("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/Modal/loginModal-create-component',
    {
        'components/Modal/loginModal-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("b83e"))
        })
    },
    [['components/Modal/loginModal-create-component']]
]);
