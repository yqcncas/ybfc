(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wm-poster/wm-poster"],{"7d78":function(t,e,n){"use strict";n.r(e);var a=n("e1b9"),r=n.n(a);for(var c in a)"default"!==c&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=r.a},"85bb":function(t,e,n){"use strict";n.r(e);var a=n("b509"),r=n("7d78");for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);var i,u=n("f0c5"),x=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=x.exports},b509:function(t,e,n){"use strict";var a,r=function(){var t=this,e=t.$createElement;t._self._c},c=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}))},e1b9:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=c(n("4795"));function c(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,r,c,i){try{var u=t[c](i),x=u.value}catch(l){return void n(l)}u.done?e(x):Promise.resolve(x).then(a,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var c=t.apply(e,n);function u(t){i(c,a,r,u,x,"next",t)}function x(t){i(c,a,r,u,x,"throw",t)}u(void 0)}))}}var x={name:"wm-poster",props:{CanvasID:{Type:String,default:"PosterCanvas"},backImg:{Type:String,default:""},imgSrc:{Type:String,default:""},imgSrc2:{Type:String,default:""},imgSrc3:{Type:String,default:""},imgSrc4:{Type:String,default:""},QrSrc:{Type:String,default:""},LogoSrc:{Type:String,default:""},Title:{Type:String,default:""},TitleColor:{Type:String,default:"#333333"},LineType:{Type:[String,Boolean],default:!1},Time:{Type:String,default:"2018/08/31"},OriginalColor:{Type:String,default:"#b8b8b8"},Width:{Type:String,default:750},Height:{Type:String,default:1684},CanvasBg:{Type:String,default:"#ffffff"},Referrer:{Type:String,default:"quitter推荐给你"},ViewDetails:{Type:String,default:"长按或扫描识别二维码"},price:{Type:String,default:"暂无售价"},homeType:{Type:String,default:"未知"},acreage:{Type:String,default:"未知"}},data:function(){return{canvasW:0,canvasH:0,canvasImgSrc:"",ctx:null}},methods:{OnCanvas:function(){var e=this;return u(r.default.mark((function n(){var c,i,u,x,l,p,o,s,f,g,d,m,S,T,F,h,v,y,I,b;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.ctx=t.createCanvasContext(a.CanvasID,e),c=t.upx2px(a.Width),i=t.upx2px(1684),u=t.upx2px(30),x=t.upx2px(180),t.upx2px(198),t.upx2px(56),l=t.upx2px(a.Width)-t.upx2px(60),p=t.upx2px(1046),o=l/3-t.upx2px(8),s=0,n.next=5,a.getImageInfo({imgSrc:a.backImg});case 5:return f=n.sent,n.next=8,a.getImageInfo({imgSrc:a.LogoSrc});case 8:return g=n.sent,n.next=11,a.getImageInfo({imgSrc:a.imgSrc});case 11:return d=n.sent,n.next=14,a.getImageInfo({imgSrc:a.imgSrc2});case 14:return m=n.sent,n.next=17,a.getImageInfo({imgSrc:a.imgSrc3});case 17:return S=n.sent,n.next=20,a.getImageInfo({imgSrc:a.imgSrc4});case 20:return T=n.sent,n.next=23,a.getImageInfo({imgSrc:a.QrSrc});case 23:F=n.sent,h=[F.width,F.height],v=c-2*u,h[0]!=x&&(h[1]=Math.floor(x/h[0]*h[1]),h[0]=x),a.canvasW=c,a.canvasH=i,a.cardHeigth=p,a.ctx.setFillStyle(a.CanvasBg),a.ctx.fillRect(0,0,c,i),a.ctx.drawImage(f.path,0,0,c,i),a.ctx.drawImage(g.path,u,t.upx2px(44),t.upx2px(258),t.upx2px(84)),a.ctx.setFontSize(t.upx2px(48)),a.ctx.setFillStyle("#FFFFFF"),a.ctx.fillText("海 量 信 息  在 线 看 房",u,t.upx2px(188),t.upx2px(466)),a.ctx.setFontSize(t.upx2px(28)),a.ctx.setFillStyle("#FFFFFF"),a.ctx.fillText("最新 最快 最真实",u,t.upx2px(236),t.upx2px(466)),a.ctx.setFillStyle("#FFFFFF"),a.ctx.setStrokeStyle("#FFFFFF"),a.ctx.lineJoin="round",a.ctx.lineWidth=7,a.ctx.setShadow(0,0,20,"rgba(0,0,0,0.05)"),a.ctx.strokeRect(u,t.upx2px(276),c-2*u,a.cardHeigth),a.ctx.fillRect(u,t.upx2px(276),c-2*u,a.cardHeigth),a.ctx.drawImage(d.path,u,t.upx2px(276),l,t.upx2px(560)),a.ctx.drawImage(m.path,u,t.upx2px(846),o,o),a.ctx.drawImage(S.path,u+o+t.upx2px(12),t.upx2px(846),o,o),a.ctx.drawImage(T.path,u+2*o+t.upx2px(22),t.upx2px(846),o,o),a.ctx.setFontSize(t.upx2px(44)),a.ctx.setFillStyle(a.TitleColor),y=0,I=t.upx2px(934)+o,1,b=0;case 57:if(!(b<a.Title.length)){n.next=70;break}if(s+=a.ctx.measureText(a.Title[b]).width,!(s+4*u+22>v)){n.next=66;break}return a.ctx.fillText(a.Title.substring(y,b+1)+"...",2*u,I),y=b,n.abrupt("break",70);case 66:b==a.Title.length-1&&(a.ctx.fillText(a.Title.substring(y,b+1),2*u,I),s=0);case 67:b++,n.next=57;break;case 70:I+=t.upx2px(75),a.ctx.setFontSize(t.upx2px(24)),a.ctx.setFillStyle("#A2A2A2"),a.ctx.fillText("售价",2*u,I),a.ctx.fillText("房型",9*u,I),a.ctx.fillText("面积",16*u,I),I+=t.upx2px(60),a.ctx.setFontSize(t.upx2px(32)),a.ctx.setFillStyle("#FE9E2E"),a.ctx.fillText(a.price,2*u,I),a.ctx.fillText(a.homeType,9*u,I),a.ctx.fillText(a.acreage,16*u,I),I+=t.upx2px(110),a.ctx.save(),a.ctx.beginPath(),a.ctx.arc(c/2,I+x/2,x/2,0,2*Math.PI),a.ctx.clip(),a.ctx.drawImage(F.path,c/2-x/2,I,x,x),a.ctx.restore(),I+=t.upx2px(240),a.ctx.setFontSize(t.upx2px(24)),a.ctx.setFillStyle("#FFFFFF"),a.ctx.fillText("长按识别二维码",c/2-3*u,I),setTimeout((function(){a.ctx.draw(!0,(function(t){a.getNewImage()}))}),600);case 94:case"end":return n.stop()}}),n)})))()},getImageInfo:function(e){return u(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.imgSrc,n.abrupt("return",new Promise((function(e,n){t.getImageInfo({src:a,success:function(t){console.log(t),e(t)},fail:function(t){n(t)}})})));case 2:case"end":return n.stop()}}),n)})))()},getNewImage:function(){t.canvasToTempFilePath({canvasId:a.CanvasID,quality:1,complete:function(t){a.$emit("success",t)}},this)}},mounted:function(){a=this,setTimeout((function(){a.OnCanvas()}),1e3)}};e.default=x}).call(this,n("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wm-poster/wm-poster-create-component',
    {
        'components/wm-poster/wm-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("85bb"))
        })
    },
    [['components/wm-poster/wm-poster-create-component']]
]);
