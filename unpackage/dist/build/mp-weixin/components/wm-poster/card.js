(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wm-poster/card"],{3030:function(t,e,n){"use strict";n.r(e);var c=n("ac6f"),x=n("3e27b");for(var a in x)"default"!==a&&function(t){n.d(e,t,(function(){return x[t]}))}(a);var i,r=n("f0c5"),u=Object(r["a"])(x["default"],c["b"],c["c"],!1,null,null,null,!1,c["a"],i);e["default"]=u.exports},"346d":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,x=a(n("4795"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,c,x,a,i){try{var r=t[a](i),u=r.value}catch(l){return void n(l)}r.done?e(u):Promise.resolve(u).then(c,x)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(c,x){var a=t.apply(e,n);function r(t){i(a,c,x,r,u,"next",t)}function u(t){i(a,c,x,r,u,"throw",t)}r(void 0)}))}}var u={name:"wm-poster",props:{CanvasID:{Type:String,default:"PosterCanvas"},imgSrc:{Type:String,default:""},QrSrc:{Type:String,default:""},TitleColor:{Type:String,default:"#333333"},LineType:{Type:[String,Boolean],default:!1},OriginalColor:{Type:String,default:"#b8b8b8"},Width:{Type:String,default:750},Height:{Type:String,default:"1048"},CanvasBg:{Type:String,default:"#ffffff"},avatar:{Type:String,default:""},userName:{Type:String,default:""},company:{Type:String,default:""},postName:{Type:String,default:""},years:{Type:String,default:""},visitTimes:{Type:String,default:""}},data:function(){return{canvasW:0,canvasH:0,canvasImgSrc:"",ctx:null}},methods:{OnCanvas:function(){var e=this;return r(x.default.mark((function n(){var a,i,r,u,l,p,o,s,f,d,g,v,S,m,T,h,y,F;return x.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c.ctx=t.createCanvasContext(c.CanvasID,e),a=t.upx2px(c.Width),i=t.upx2px(c.Height),r=t.upx2px(30),u=t.upx2px(530),l=t.upx2px(924),p=t.upx2px(216),o=t.upx2px(145),s=t.upx2px(198),f=t.upx2px(56),0,n.next=5,c.getImageInfo({imgSrc:c.imgSrc});case 5:return d=n.sent,n.next=8,c.getImageInfo({imgSrc:c.QrSrc});case 8:return g=n.sent,n.next=11,c.getImageInfo({imgSrc:c.avatar});case 11:v=n.sent,S=[d.width,d.height],m=[g.width,g.height],[s,f],T=a-2*r,S[0]!=T&&(S[1]=Math.floor(T/S[0]*S[1]),S[0]=T),m[0]!=p&&(m[1]=Math.floor(p/m[0]*m[1]),m[0]=p),c.canvasW=a,c.canvasH=i,c.ctx.setFillStyle(c.CanvasBg),c.ctx.fillRect(0,0,a,c.canvasH),c.ctx.drawImage(d.path,0,0,a,i),h=t.upx2px(62),c.ctx.setFillStyle("#FFFFFF"),c.ctx.setStrokeStyle("#FFFFFF"),c.ctx.lineJoin="round",c.ctx.lineWidth=5,c.ctx.setShadow(0,0,20,"rgba(0,0,0,0.05)"),c.ctx.strokeRect(r,h,u,l),c.ctx.fillRect(r,h,u,l),h+=t.upx2px(30),c.ctx.save(),c.ctx.beginPath(),c.ctx.arc(a/2,h+o/2,o/2,0,2*Math.PI),c.ctx.clip(),c.ctx.drawImage(v.path,a/2-o/2,h,o,o),c.ctx.restore(),h+=o,h+=t.upx2px(60),c.ctx.setFontSize(t.upx2px(40)),c.ctx.setFillStyle("#333333"),c.ctx.setTextAlign("center"),c.ctx.fillText(c.userName,a/2,h),h+=t.upx2px(40),c.ctx.setFontSize(t.upx2px(28)),c.ctx.setFillStyle("#9B9B9B"),c.ctx.setTextAlign("center"),c.ctx.fillText(c.company,a/2,h),h+=t.upx2px(20),y=t.upx2px(98),F=t.upx2px(34),c.ctx.setFillStyle("rgba(135,74,152,0.1)"),c.ctx.lineJoin="round",c.ctx.fillRect(a/2-y/2,h,y,F),h+=t.upx2px(25),c.ctx.setFontSize(t.upx2px(24)),c.ctx.setFillStyle("#874A98"),c.ctx.setTextAlign("center"),c.ctx.fillText(c.postName,a/2,h),h+=t.upx2px(60),c.ctx.setFontSize(t.upx2px(2)),c.ctx.lineWidth=1,c.ctx.moveTo(t.upx2px(90),h),c.ctx.lineTo(t.upx2px(500),h),c.ctx.strokeStyle="#F6F6F6",c.ctx.stroke(),h+=t.upx2px(60),c.ctx.setFontSize(t.upx2px(28)),c.ctx.setFillStyle("#9B9B9B"),c.ctx.fillText("服务年限",t.upx2px(180),h),c.ctx.fillText("带看人数",t.upx2px(410),h),h+=t.upx2px(60),c.ctx.setFontSize(t.upx2px(34)),c.ctx.setFillStyle("#333333"),c.ctx.setTextAlign("center"),c.ctx.fillText(c.years,t.upx2px(180),h),c.ctx.fillText(c.visitTimes,t.upx2px(410),h),h+=t.upx2px(40),c.ctx.setFontSize(t.upx2px(2)),c.ctx.lineWidth=1,c.ctx.moveTo(t.upx2px(90),h),c.ctx.lineTo(t.upx2px(500),h),c.ctx.strokeStyle="#F6F6F6",c.ctx.stroke(),h+=t.upx2px(60),c.ctx.setFontSize(t.upx2px(28)),c.ctx.setFillStyle("#9B9B9B"),c.ctx.setTextAlign("center"),c.ctx.fillText("长按识别二维码，海量房源任你选",a/2,h),h+=t.upx2px(60),c.ctx.drawImage(g.path,a/2-p/2,h,m[0],m[1]),setTimeout((function(){c.ctx.draw(!0,(function(t){c.getNewImage()}))}),600);case 93:case"end":return n.stop()}}),n)})))()},getImageInfo:function(e){return r(x.default.mark((function n(){var c;return x.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.imgSrc,n.abrupt("return",new Promise((function(e,n){t.getImageInfo({src:c,success:function(t){console.log(c,t),e(t)},fail:function(t){console.log(c,t),n(t)}})})));case 2:case"end":return n.stop()}}),n)})))()},getNewImage:function(){t.canvasToTempFilePath({canvasId:c.CanvasID,quality:1,complete:function(t){c.$emit("success",t)}},this)}},mounted:function(){c=this,setTimeout((function(){c.OnCanvas()}),1e3)}};e.default=u}).call(this,n("543d")["default"])},"3e27b":function(t,e,n){"use strict";n.r(e);var c=n("346d"),x=n.n(c);for(var a in c)"default"!==a&&function(t){n.d(e,t,(function(){return c[t]}))}(a);e["default"]=x.a},ac6f:function(t,e,n){"use strict";var c,x=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}))}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wm-poster/card-create-component',
    {
        'components/wm-poster/card-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("3030"))
        })
    },
    [['components/wm-poster/card-create-component']]
]);
