(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-editUserInfo"],{"0705":function(e,t,i){"use strict";var a=i("6387"),n=i.n(a);n.a},"1b6b":function(e,t,i){"use strict";var a=i("ee27");i("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=a(i("c964")),r=a(i("d66d")),s={name:"editUserInfo",data:function(){var e=this.getDate({format:!0});return{avatar:"",birthday:"",sex:"",userName:"",token:"",sexList:[{id:1,value:"男"},{id:2,value:"女"}],gender:"请选择",date:e,phone:"",isAdmin:!1}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},methods:{getUserInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isAdmin){t.next=12;break}return t.next=3,e.$fetch(e.$api.getInfo,{},"GET");case 3:i=t.sent,e.avatar=r.default.pro+"profile/avatar/"+i.data.avatar,i.data.avatar?e.avatar=r.default.pro+"profile/avatar/"+i.data.avatar:e.avatar="https://img.bajiaostar.com/FgkVAFlA5etvApeTeLEt2P0s822H",e.userName=i.data.userName,e.phone=i.data.phonenumber,e.sex=i.data.sex,0==e.sex?e.gender="男":1==e.sex&&(e.gender="女"),t.next=21;break;case 12:return t.next=14,e.$fetch(e.$api.getMyInfo,{},"GET");case 14:a=t.sent,a.data.avatar?e.avatar=r.default.pro+"profile/avatar/"+a.data.avatar:e.avatar="https://img.bajiaostar.com/FgkVAFlA5etvApeTeLEt2P0s822H",a.data.birthday&&(e.birthday=e.$dayjs(a.data.birthday).format("YYYY-MM-DD")),e.userName=a.data.userName,e.phone=a.data.phonenumber,e.sex=a.data.sex,0==e.sex?e.gender="男":1==e.sex&&(e.gender="女");case 21:case"end":return t.stop()}}),t)})))()},editAvatar:function(){var e=this;this.isAdmin?uni.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){for(var i=0;i<t.tempFilePaths.length;i++)uni.uploadFile({url:r.default.pro+e.$api.agentEditInfo,filePath:t.tempFilePaths[i],name:"file",formData:{token:e.token},success:function(t){console.log(t),e.getUserInfo()}})}}):uni.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){for(var i=0;i<t.tempFilePaths.length;i++)uni.uploadFile({url:r.default.pro+e.$api.userEditInfo,filePath:t.tempFilePaths[i],name:"file",formData:{token:e.token},success:function(t){console.log(t),e.getUserInfo()}})}})},editUserInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isAdmin){t.next=7;break}return t.next=3,e.$fetch(e.$api.agentEditInfo,{birthday:e.birthday,sex:e.sex,userName:e.userName},"POST","from");case 3:i=t.sent,uni.showToast({icon:"none",title:i.msg}),t.next=11;break;case 7:return t.next=9,e.$fetch(e.$api.userEditInfo,{birthday:e.birthday,sex:e.sex,userName:e.userName},"POST","from");case 9:a=t.sent,uni.showToast({icon:"none",title:a.msg});case 11:case"end":return t.stop()}}),t)})))()},sexChange:function(e){for(var t in this.sexList)t==e.target.value&&(this.sex=t,this.gender=this.sexList[t].value,this.editUserInfo())},dateChange:function(e){this.birthday=e.target.value,this.editUserInfo()},getDate:function(e){var t=new Date,i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return"start"===e?i-=60:"end"===e&&(i+=2),a=a>9?a:"0"+a,n=n>9?n:"0"+n,"".concat(i,"-").concat(a,"-").concat(n)},editUserName:function(){uni.navigateTo({url:"editUserName?userName="+this.userName})}},onShow:function(){uni.getStorageSync("isAdmin")&&(this.isAdmin=uni.getStorageSync("isAdmin")),this.getUserInfo(),this.token=uni.getStorageSync("token")}};t.default=s},3305:function(e,t,i){"use strict";var a={getApp:i("1bde").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"userInfo"},[a("v-uni-view",{staticClass:"avatar",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.editAvatar.apply(void 0,arguments)}}},[a("v-uni-view",[a("v-uni-image",{attrs:{src:e.avatar,mode:""}})],1),a("v-uni-view",[a("v-uni-text",[e._v("修改头像")]),a("v-uni-image",{attrs:{src:i("fa19"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"info",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.editUserName.apply(void 0,arguments)}}},[a("v-uni-view",[a("v-uni-text",[e._v("姓名")])],1),a("v-uni-view",[a("v-uni-text",{staticClass:"name"},[e._v(e._s(e.userName))]),a("v-uni-image",{attrs:{src:i("fa19"),mode:""}})],1)],1),a("v-uni-picker",{attrs:{mode:"selector",range:e.sexList,"range-key":"value",value:e.sex},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sexChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",[a("v-uni-text",[e._v("性别")])],1),a("v-uni-view",[a("v-uni-text",[e._v(e._s(e.gender))]),a("v-uni-image",{attrs:{src:i("fa19"),mode:""}})],1)],1)],1),a("v-uni-picker",{attrs:{mode:"date",value:e.date,start:e.startDate,end:e.endDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.dateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",[a("v-uni-text",[e._v("生日")])],1),a("v-uni-view",[a("v-uni-text",[e._v(e._s(e.birthday))]),a("v-uni-image",{attrs:{src:i("fa19"),mode:""}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"phone"},[a("v-uni-view",[e._v("手机号")]),a("v-uni-view",[e._v(e._s(e.phone))])],1),a("getApp")],1)},r=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}))},"3ece":function(e,t,i){"use strict";i.r(t);var a=i("1b6b"),n=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},6387:function(e,t,i){var a=i("8d5c");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("d9c8379e",a,!0,{sourceMap:!1,shadowMode:!1})},"8d5c":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-1841f672]{background:#f0f0f0}.userInfo[data-v-1841f672]{background:#fff;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.avatar[data-v-1841f672]{width:%?720?%;height:%?220?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-left:%?30?%;border-bottom:%?2?% solid #f0f0f0}.avatar > uni-view[data-v-1841f672]:first-child{width:%?160?%;height:%?160?%;border-radius:50%}.avatar > uni-view:first-child uni-image[data-v-1841f672]{width:%?160?%;height:%?160?%;border-radius:50%}.avatar > uni-view[data-v-1841f672]:nth-child(2){margin-left:%?370?%;width:%?188?%;height:%?220?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;color:#9b9b9b}.avatar > uni-view:nth-child(2) uni-image[data-v-1841f672]{margin-left:%?32?%;width:%?16?%;height:%?26?%}.info[data-v-1841f672]{width:%?690?%;height:%?110?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:0 %?30?%;border-bottom:%?2?% solid #f0f0f0}.info > uni-view[data-v-1841f672]:first-child{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?110?%;line-height:%?110?%;font-size:%?28?%;color:#9b9b9b;letter-spacing:%?-0.68?%}.info > uni-view[data-v-1841f672]:nth-child(2){-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?110?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;line-height:%?110?%}.info > uni-view:nth-child(2) uni-text[data-v-1841f672]{height:%?110?%;text-align:right;font-size:%?28?%;color:#9b9b9b}.info > uni-view:nth-child(2) .name[data-v-1841f672]{font-size:%?34?%;color:#4a4a4a;font-weight:700}.info > uni-view:nth-child(2) uni-image[data-v-1841f672]{margin-left:%?32?%;width:%?16?%;height:%?26?%}.phone[data-v-1841f672]{width:100%;height:%?110?%;background:#fff;margin-top:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?110?%}.phone > uni-view[data-v-1841f672]:first-child{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?30?%;font-size:%?28?%;color:#9b9b9b}.phone > uni-view[data-v-1841f672]:nth-child(2){-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?34?%;font-weight:700;color:#4a4a4a;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;margin-right:%?30?%}body.?%PAGE?%[data-v-1841f672]{background:#f0f0f0}",""]),e.exports=t},fa19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAaCAYAAAHJb+yRAAAABGdBTUEAALGPC/xhBQAAARxJREFUOBGdk4ENgzAMBGm7QDeo2MSjZxPEBh2hvohHTxoK9KXEb/v9CYUOQ4O4N4Vf6UizblKFSBvXBmQdWQlyTn7lilwbRGas4ca2IESI+AQEbBIKwSbggYKTQKm7bQiEEMlYxF2gWohkLA9LRBl6LsnNHcYs6i5z8gkRgm6DpgNRF9whcnEmbu9cGyCggaArQsDUrkiPuSuSIE36Ti7oiu5UG+jHojxxOUdYUuAuCAoLiogEoULGYrw6hBU2Teo8hX6kryYCHTEm1+3n5PVVIzgCBj7s+lNGGAh/GbnBX0Y9g0tGvwxOGbUfm4Y8+qfs9foHObrBmBN6vT48Z1Jf9Z7B4aDcWoPTg63B5UE36A3PekYJz0SMWJfwARHdMZ0gfb2LAAAAAElFTkSuQmCC"},fb93:function(e,t,i){"use strict";i.r(t);var a=i("3305"),n=i("3ece");for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("0705");var s,o=i("f0c5"),f=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"1841f672",null,!1,a["a"],s);t["default"]=f.exports}}]);