(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mapSearch-mapSearch"],{"032b":function(e,t,a){"use strict";var i=a("ee27");a("4160"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var s=i(a("c964")),n=i(a("cee8")),r={name:"mapSearch",data:function(){return{lat:27.992827,lng:120.649701,scale:11,tabCurrentIndex:0,tabList:[{id:1,name:"二手房"},{id:2,name:"租房"},{id:3,name:"新房"}],houseType:2,markers:[],size:1,oldHouseList:[],newHosueList:[],flag1:!0,flag2:!0,flag3:!0,flag4:!0,markers1:[],markers2:[],markers3:[],markers4:[],circles:[],isUpdate:!1,labelList:[],label1:[],label2:[],label3:[],label4:[],drag:!1}},components:{myOverlay:n.default},methods:{bMapToTxMap:function(e,t){var a=new Object,i=52.35987755982988,s=t-.0065,n=e-.006,r=Math.sqrt(s*s+n*n)-2e-5*Math.sin(n*i),l=Math.atan2(n,s)-3e-6*Math.cos(s*i),o=r*Math.cos(l),c=r*Math.sin(l);return a.longitude=o,a.latitude=c,a},changeTab:function(e){this.tabCurrentIndex=e,this.flag1=!0,this.flag2=!0,this.flag3=!0,this.flag4=!0,this.scale=11,0==this.tabCurrentIndex?(this.markers=[],this.houseType=2,this.searchHouse(),this.searchxyProvince(),this.searchxyHouse(this.lat,this.lng),this.markers=this.markers1):1==this.tabCurrentIndex?(this.markers=[],this.houseType=1,this.searchHouse(),this.searchxyProvince(),this.searchxyHouse(this.lat,this.lng),this.markers=this.markers1):2==this.tabCurrentIndex&&(this.markers=[],this.houseType=3,this.searchNewHouse(),this.searchNewxyProvince(),this.searchNewxyHouse(this.lat,this.lng),this.markers=this.markers1)},clickLabel:function(e){var t=this;console.log(e);var a=e.markerId;this.scale>=17?3!=this.houseType?uni.navigateTo({url:"../xiaoqu/areaHouse?areaId="+a+"&houseType="+this.houseType}):uni.navigateTo({url:"../newHouse/newHouse?houseId="+a+"&houseType="+this.houseType}):this.scale<=12?(this.markers=[],this.markers1.forEach((function(e){e.id==a&&(t.lat=e.latitude,t.lng=e.longitude)})),this.isUpdate=!0,this.scale=13):this.scale>=13&&this.scale<=14&&(this.markers=[],this.isUpdate=!0,this.scale=17,this.markers2.forEach((function(e){e.id==a&&(t.lat=e.latitude,t.lng=e.longitude)})))},checkMore:function(e){var t=this;console.log(e),this.scale<=12?(this.labelList=[],this.label1.forEach((function(a,i){i==e&&(t.lat=a.latitude,t.lng=a.longitude)})),this.isUpdate=!0,this.scale=13):this.scale>=13&&this.scale<=14&&(this.labelList=[],this.isUpdate=!0,this.scale=17,this.label2.forEach((function(a,i){i==e&&(console.log(a.latitude,a.longitude),t.lat=a.latitude,t.lng=a.longitude)})))},labelClick:function(e){this.scale>=17&&(3!=this.houseType?uni.navigateTo({url:"../xiaoqu/areaHouse?areaId="+e+"&houseType="+this.houseType}):uni.navigateTo({url:"../newHouse/newHouse?houseId="+e+"&houseType="+this.houseType}))},changeZoom:function(e){this.scale=e.target.getZoom(),console.log(this.isUpdate),this.isUpdate?this.scale>=13&&this.scale<=14&&this.flag2?(this.labelList=[],this.flag1=!0,this.flag2=!1,this.flag3=!0,this.flag4=!0,this.isUpdate=!1,this.labelList=this.label2,console.log(this.isUpdate)):this.scale>=17&&this.flag4&&(this.labelList=[],this.flag1=!0,this.flag2=!0,this.flag3=!0,this.flag4=!1,this.isUpdate=!1,this.labelList=this.label4):this.scale<13&&this.flag1?(this.labelList=[],this.flag1=!1,this.flag2=!0,this.flag3=!0,this.flag4=!0,this.labelList=this.label1):this.scale>=13&&this.flag2&&this.scale<=14?(this.labelList=[],this.flag1=!0,this.flag2=!1,this.flag3=!0,this.flag4=!0,this.labelList=this.label2):this.scale>=15&&this.flag3&&this.scale<=16?(this.labelList=[],this.flag1=!0,this.flag2=!0,this.flag3=!1,this.flag4=!0,this.labelList=this.label3):this.scale>=17&&this.flag4&&(console.log("触发"),this.labelList=[],this.flag1=!0,this.flag2=!0,this.flag3=!0,this.flag4=!1,this.labelList=this.label4)},dragStart:function(e){uni.showToast({icon:"none",title:e.type})},touchMove:function(){this.drag=!0},touchEnd:function(){this.drag=!1},changeRegion:function(e){var t=this;console.log(e),this.mapCtx=uni.createMapContext("mapSearch"),console.log(this.mapCtx),this.mapCtx.getCenterLocation({success:function(e){console.log(e),t.lat=e.latitude,t.lng=e.longitude}}),this.mapCtx.getScale({success:function(e){console.log(e.scale)}}),this.isUpdate?this.scale>=13&&this.scale<=14&&this.flag2?(this.markers=[],this.flag1=!0,this.flag2=!1,this.flag3=!0,this.flag4=!0,this.isUpdate=!1,this.markers=this.markers2):this.scale>=17&&this.flag4&&(this.markers=[],this.flag1=!0,this.flag2=!0,this.flag3=!0,this.flag4=!1,this.isUpdate=!1,this.markers=this.markers4):"scale"==e.causedBy&&this.mapCtx.getScale({success:function(e){console.log(e.scale),e.scale<13&&t.flag1?(t.markers=[],t.flag1=!1,t.flag2=!0,t.flag3=!0,t.flag4=!0,t.markers=t.markers1,t.scale=e.scale):e.scale>=13&&t.flag2&&e.scale<=14?(t.markers=[],t.flag1=!0,t.flag2=!1,t.flag3=!0,t.flag4=!0,t.markers=t.markers2,t.scale=e.scale):e.scale>=15&&t.flag3&&e.scale<=16?(t.markers=[],t.flag1=!0,t.flag2=!0,t.flag3=!1,t.flag4=!0,t.markers=t.markers3,t.scale=e.scale):e.scale>=17&&t.flag4&&(t.markers=[],t.flag1=!0,t.flag2=!0,t.flag3=!0,t.flag4=!1,t.markers=t.markers4,t.scale=e.scale)}})},searchHouse:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.markers1=[],t.next=3,e.$fetch(e.$api.jiufang,{houseType:e.houseType},"GET");case 3:a=t.sent,[],a.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude},e.flag=1})),e.label1=a.data,e.labelList=a.data;case 8:case"end":return t.stop()}}),t)})))()},searchxyProvince:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.markers2=[],t.next=3,e.$fetch(e.$api.jiufangProvince,{houseType:e.houseType},"GET");case 3:a=t.sent,e.oldHouseList=JSON.parse(JSON.stringify(a.data)),[],a.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude},e.flag=2})),e.label2=a.data;case 8:case"end":return t.stop()}}),t)})))()},searchxyHouse:function(e,t){var a=this;return(0,s.default)(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.markers3=[],a.markers4=[],i.next=4,a.$fetch(a.$api.jiufangHouse,{lat:e,lng:t,size:20,houseType:a.houseType},"GET");case 4:s=i.sent,[],s.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude}})),a.label3=JSON.parse(JSON.stringify(s.data)),a.label4=JSON.parse(JSON.stringify(s.data)),a.label3.forEach((function(e){e.flag=3})),a.label4.forEach((function(e){e.flag=4}));case 11:case"end":return i.stop()}}),i)})))()},searchNewHouse:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.markers1=[],t.next=3,e.$fetch(e.$api.xinfang,{},"GET");case 3:a=t.sent,[],a.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude},e.flag=1})),e.label1=a.data,e.labelList=a.data;case 8:case"end":return t.stop()}}),t)})))()},searchNewxyProvince:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.markers2=[],t.next=3,e.$fetch(e.$api.xinfangProvince,{},"GET");case 3:a=t.sent,e.newHosueList=JSON.parse(JSON.stringify(a.data)),[],a.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude},e.flag=2})),e.label2=a.data;case 8:case"end":return t.stop()}}),t)})))()},searchNewxyHouse:function(e,t){var a=this;return(0,s.default)(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.markers3=[],a.markers4=[],i.next=4,a.$fetch(a.$api.xinfangHouse,{lat:e,lng:t,size:20},"GET");case 4:s=i.sent,[],s.data.forEach((function(e){e.position={lng:e.longitude,lat:e.latitude}})),a.label3=JSON.parse(JSON.stringify(s.data)),a.label4=JSON.parse(JSON.stringify(s.data)),a.label3.forEach((function(e){e.flag=3})),a.label4.forEach((function(e){e.flag=4}));case 11:case"end":return i.stop()}}),i)})))()}},onLoad:function(e){this.searchHouse(),this.searchxyProvince(),this.searchxyHouse(this.lat,this.lng),this.markers=this.markers1,this.labelList=this.label1}};t.default=r},"0dc3":function(e,t,a){"use strict";var i=a("7f1c"),s=a.n(i);s.a},"363a":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".sample[data-v-2607ead7]{position:absolute}.sample .sample-item[data-v-2607ead7]{width:50px;height:50px;border-radius:50%;background:rgba(135,74,152,.8);padding:10px;overflow:hidden;color:#fff;font-size:12px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.sample .sample-item > uni-view[data-v-2607ead7]:first-child{white-space:nowrap}.sample .orange[data-v-2607ead7]{background:rgba(254,158,46,.8)}.sample .sample-point[data-v-2607ead7]{width:10px;height:10px;border-radius:50%;background:rgba(135,74,152,.8);overflow:hidden}.sample .sample-label[data-v-2607ead7]{padding:10px 10px;border-radius:20px;color:#fff;font-size:12px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;white-space:nowrap;background:rgba(135,74,152,.8)}",""]),e.exports=t},"46e4":function(e,t,a){"use strict";a.r(t);var i=a("626f"),s=a("a601");for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("774c");var r,l=a("f0c5"),o=Object(l["a"])(s["default"],i["b"],i["c"],!1,null,"14d32fb3",null,!1,i["a"],r);t["default"]=o.exports},"4e06":function(e,t,a){"use strict";var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("bm-overlay",{ref:"customOverlay",staticClass:"sample",attrs:{pane:"labelPane"},on:{draw:function(t){arguments[0]=t=e.$handleEvent(t),e.draw.apply(void 0,arguments)}}},[1==e.flag?a("v-uni-view",{staticClass:"sample-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClick.apply(void 0,arguments)}}},[a("v-uni-view",[e._v(e._s(e.dictValue))]),a("v-uni-view",[e._v(e._s(e.count))])],1):e._e(),2==e.flag?a("v-uni-view",{staticClass:"sample-item",class:{orange:"下吕浦"==e.dictValue},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClick.apply(void 0,arguments)}}},[a("v-uni-view",[e._v(e._s(e.dictValue))]),a("v-uni-view",[e._v(e._s(e.count))])],1):e._e(),3==e.flag?a("v-uni-view",{staticClass:"sample-point"}):e._e(),4==e.flag?a("v-uni-view",{staticClass:"sample-label",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClick.apply(void 0,arguments)}}},[a("v-uni-view",[e._v(e._s(e.areaName)+"|"+e._s(e.count)+"套")])],1):e._e()],1)},n=[];a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}))},"626f":function(e,t,a){"use strict";var i={getApp:a("1bde").default},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"tab"},[a("v-uni-scroll-view",{staticClass:"nav-bar",attrs:{id:"nav-bar","scroll-x":!0,"scroll-with-animation":!0}},e._l(e.tabList,(function(t,i){return a("v-uni-view",{key:t.id,staticClass:"nav-item",class:{current:i===e.tabCurrentIndex},attrs:{id:"tab"+i},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeTab(i)}}},[e._v(e._s(t.name))])})),1)],1),a("baidu-map",{staticClass:"bm-view",attrs:{center:{lng:e.lng,lat:e.lat},zoom:e.scale,dragging:e.drag},on:{zoomend:function(t){arguments[0]=t=e.$handleEvent(t),e.changeZoom.apply(void 0,arguments)},touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.touchMove.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.touchEnd.apply(void 0,arguments)}}},e._l(e.labelList,(function(t,i){return a("my-overlay",{key:i,attrs:{position:t.position,dictValue:t.dictValue,count:t.count,flag:t.flag,areaName:t.areaName,areaId:t.areaId,labelIndex:i},on:{labelClick:function(t){arguments[0]=t=e.$handleEvent(t),e.labelClick.apply(void 0,arguments)},checkMore:function(t){arguments[0]=t=e.$handleEvent(t),e.checkMore.apply(void 0,arguments)}}})})),1),a("getApp")],1)},n=[];a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}))},"6f17":function(e,t,a){"use strict";a.r(t);var i=a("ae1d"),s=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"76a1":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-map[data-v-14d32fb3]{width:%?750?%;height:100vh}.tab[data-v-14d32fb3]{width:100%;height:%?90?%;background:#fff;position:relative;z-index:10}.nav-bar[data-v-14d32fb3]{position:relative;z-index:10;height:%?90?%;white-space:nowrap;background-color:#fff}.nav-bar .nav-item[data-v-14d32fb3]{display:inline-block;width:%?250?%;height:%?90?%;text-align:center;line-height:%?90?%;font-size:%?28?%;color:#a6a6a6;position:relative}.nav-bar .nav-item[data-v-14d32fb3]:after{content:"";width:0;height:0;border-bottom:%?6?% solid #874a98;position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:.3s;transition:.3s}.nav-bar .current[data-v-14d32fb3]{color:#874a98;font-size:%?32?%;font-weight:700}.nav-bar .current[data-v-14d32fb3]:after{width:50%}.bm-view[data-v-14d32fb3]{width:100%;height:100vh}',""]),e.exports=t},"774c":function(e,t,a){"use strict";var i=a("f9b6"),s=a.n(i);s.a},"7f1c":function(e,t,a){var i=a("363a");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("4f06").default;s("8c442ed8",i,!0,{sourceMap:!1,shadowMode:!1})},a601:function(e,t,a){"use strict";a.r(t);var i=a("032b"),s=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},ae1d:function(e,t,a){"use strict";a("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{}},props:["position","dictValue","count","flag","banTouch","areaName","areaId","labelIndex"],watch:{position:{handler:function(){this.$refs.customOverlay.reload()},deep:!0}},methods:{handleClick:function(){this.areaId?this.$emit("labelClick",this.areaId):this.$emit("checkMore",this.labelIndex)},draw:function(e){var t=e.el,a=e.BMap,i=e.map,s=this.position,n=s.lng,r=s.lat,l=i.pointToOverlayPixel(new a.Point(n,r));t.style.left=l.x-40+"px",t.style.top=l.y-20+"px"}}};t.default=i},cee8:function(e,t,a){"use strict";a.r(t);var i=a("4e06"),s=a("6f17");for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("0dc3");var r,l=a("f0c5"),o=Object(l["a"])(s["default"],i["b"],i["c"],!1,null,"2607ead7",null,!1,i["a"],r);t["default"]=o.exports},f9b6:function(e,t,a){var i=a("76a1");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("4f06").default;s("10052be3",i,!0,{sourceMap:!1,shadowMode:!1})}}]);